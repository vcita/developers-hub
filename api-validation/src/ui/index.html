<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Validation Dashboard</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>API Validation Dashboard</h1>
      <div class="header-info">
        <span id="environment" class="badge">Environment: Loading...</span>
        <span id="endpoint-count" class="badge">Endpoints: --</span>
      </div>
    </header>

    <!-- Filters Section -->
    <section class="filters-section">
      <h2>Filters</h2>
      <div class="filters">
        <div class="filter-group">
          <label for="domain-filter">Domain:</label>
          <select id="domain-filter">
            <option value="">All</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="method-filter">Method:</label>
          <select id="method-filter">
            <option value="">All</option>
            <option value="GET">GET</option>
            <option value="POST">POST</option>
            <option value="PUT">PUT</option>
            <option value="PATCH">PATCH</option>
            <option value="DELETE">DELETE</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="token-filter">Token:</label>
          <select id="token-filter">
            <option value="">All</option>
            <option value="staff">Staff</option>
            <option value="directory">Directory</option>
            <option value="client">Client</option>
            <option value="business">Business</option>
            <option value="app">App</option>
          </select>
        </div>
        <div class="filter-group search-group">
          <label for="search-filter">Search:</label>
          <input type="text" id="search-filter" placeholder="Search endpoints...">
        </div>
      </div>
    </section>

    <!-- Rate Limiting Section -->
    <section class="rate-limit-section">
      <h2>Rate Limiting</h2>
      <div class="rate-limit-controls">
        <div class="filter-group">
          <label for="rate-preset">Preset:</label>
          <select id="rate-preset">
            <option value="conservative">Conservative (2 req/s)</option>
            <option value="normal" selected>Normal (5 req/s)</option>
            <option value="aggressive">Aggressive (20 req/s)</option>
            <option value="sequential">Sequential (1 req/s)</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="concurrent">Concurrent:</label>
          <input type="number" id="concurrent" min="1" max="20" value="3">
        </div>
        <div class="filter-group checkbox-group">
          <label>
            <input type="checkbox" id="retry-429" checked>
            Auto-retry 429
          </label>
        </div>
      </div>
    </section>

    <!-- Endpoints Section -->
    <section class="endpoints-section">
      <div class="endpoints-header">
        <h2>Endpoints <span id="selected-count">(0 selected)</span></h2>
        <div class="endpoints-actions">
          <button id="select-all-btn" class="btn btn-secondary">Select All</button>
          <button id="deselect-all-btn" class="btn btn-secondary">Deselect All</button>
          <button id="run-btn" class="btn btn-primary" disabled>Run Selected</button>
        </div>
      </div>
      <div id="endpoints-list" class="endpoints-list">
        <div class="loading">Loading endpoints...</div>
      </div>
    </section>

    <!-- Progress Section -->
    <section id="progress-section" class="progress-section hidden">
      <h2>Test Progress</h2>
      <div class="progress-info">
        <span id="progress-text">Running: 0/0</span>
        <span id="progress-percent">0%</span>
      </div>
      <div class="progress-bar">
        <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
      </div>
      <div id="progress-log" class="progress-log"></div>
    </section>

    <!-- Results Section -->
    <section id="results-section" class="results-section hidden">
      <div class="results-header">
        <h2>Results</h2>
        <div class="results-summary">
          <span class="badge badge-pass">Passed: <span id="results-passed">0</span></span>
          <span class="badge badge-fail">Failed: <span id="results-failed">0</span></span>
          <span class="badge badge-skip">Skipped: <span id="results-skipped">0</span></span>
        </div>
        <div class="results-actions">
          <button id="download-report-btn" class="btn btn-secondary" onclick="ResultsViewer.downloadReport()">
            ðŸ“„ Download Report
          </button>
        </div>
      </div>
      <div id="results-list" class="results-list"></div>
    </section>
  </div>

  <script src="js/app.js"></script>
  <script src="js/endpoint-list.js"></script>
  <script src="js/test-runner.js"></script>
  <script src="js/results-viewer.js"></script>
</body>
</html>
