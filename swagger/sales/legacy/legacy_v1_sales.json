{
  "basePath": "/platform/v1",
  "host": "api.vcita.biz",
  "info": {
    "title": "Sales Legacy API v1",
    "version": "v1.0",
    "description": "Legacy v1 Platform API endpoints for sales domain including payments, invoices, estimates, packages, and lead generation"
  },
  "paths": {
    "/leadgen": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "description": "A unique identifer of the business. Can be the Business UID or nickname\\external ID",
            "in": "header",
            "name": "X-On-Behalf-Of",
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "address": {
                  "description": "Lead's address",
                  "type": "string"
                },
                "business_id": {
                  "description": "A unique identifier of the business. Can be the Business UID or nickname\\external ID.",
                  "type": "string"
                },
                "email": {
                  "description": "Lead email address. Unique per business.",
                  "type": "string"
                },
                "first_name": {
                  "description": "Lead first name. Mandatory for a new lead.",
                  "type": "string"
                },
                "identifier_type": {
                  "description": "Defines which unique identifier will be used to search for an existing lead or create a new one. Possible values: \"email\" or \"unique_id\"",
                  "type": "string"
                },
                "last_name": {
                  "description": "Lead last name.",
                  "type": "string"
                },
                "message_data": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "description": "Key and value that will appear in message",
                  "type": "object"
                },
                "notifications": {
                  "description": "A list of notifications to send after processing of the lead. Possible values: \"auto-reply\" (thank you email to the end user), \"email\" (notify the business owner) or \"sms\" (text notification to the business owner). None if empty.",
                  "type": "string"
                },
                "opt_in": {
                  "description": "Send \"true\" if lead opted in for promotions. Make sure the \"opt-in\" client card field is added to the client card under Settings>Client card.",
                  "type": "string"
                },
                "opt_in_transactional_sms": {
                  "description": "Whether the client opts in to receive transactional SMS messages.",
                  "type": "boolean"
                },
                "phone": {
                  "description": "Lead phone number.",
                  "type": "string"
                },
                "request_data": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "description": "Key and value properties that will update new lead and appear in message",
                  "type": "object"
                },
                "request_title": {
                  "description": "Request title. Will also be the created conversation title.",
                  "type": "string"
                },
                "source": {
                  "description": "Will be displayed to the business owner as the lead source",
                  "type": "string"
                },
                "source_url": {
                  "description": "The URL of the page where the lead was created.",
                  "type": "string"
                },
                "status": {
                  "description": "Use a client status to categorize clients according to their relationship with your business, default is Lead.",
                  "type": "string"
                },
                "system_message": {
                  "description": "A message displayed to the business owner to introduce the lead. May contain links.",
                  "type": "string"
                },
                "tags": {
                  "description": "Customized labels that enbale you to sort your data using personalized words, phrases or themes that are meaningful to you and your business",
                  "type": "string"
                },
                "unique_id": {
                  "description": "Lead unique id. Unique per business.",
                  "type": "string"
                }
              },
              "required": [
                "identifier_type",
                "first_name",
                "request_title"
              ],
              "type": "object"
            }
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "201": {
            "description": "Success",
            "examples": {
              "application/json": {
                "conversation_uid": "pehfh46jy6c9mlba",
                "status": "OK",
                "uid": "jg7vmlf2uwx5m6fy"
              }
            }
          }
        },
        "security": [
          {
            "default": [
              "platform"
            ]
          }
        ],
        "summary": "Creates a lead",
        "tags": [
          "LeadGen"
        ],
        "x-amazon-apigateway-auth": {
          "type": "NONE"
        },
        "x-amazon-apigateway-integration": {
          "httpMethod": "POST",
          "responses": {
            "default": {
              "statusCode": "201"
            }
          },
          "type": "http_proxy",
          "uri": "https:///platform/v1/leadgen"
        },
        "x-auth-type": "Application & Application User"
      }
    },
    "/estimates": {
      "get": {
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "description": "Filter by created_at, updated_at, state. state values: issued, approved, draft, invoiced, rejected. available operators for created_at and updated_at: gt, gte, lt, lte, eq. available operators for state: in. example: filter[created_at][gt]=2019-01-01, filter[state][in]=issued,rejected",
            "in": "query",
            "name": "filter",
            "required": false,
            "type": "string"
          },
          {
            "description": "Sort by one of the following: created_at, updated_at, state. available operators: asc, desc. example: sort=created_at:asc,updated_at:desc",
            "in": "query",
            "name": "sort",
            "required": false,
            "type": "string"
          },
          {
            "description": "Page offset",
            "in": "query",
            "name": "page",
            "required": false,
            "type": "string"
          },
          {
            "description": "Page size (default: 25)",
            "in": "query",
            "name": "per_page",
            "required": false,
            "type": "string"
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "Estimates Returned",
            "examples": {
              "application/json": {
                "data": {
                  "estimates": [
                    {
                      "address": "habarzel 32\\nTel Aviv",
                      "amount": 8.8,
                      "client_address": "Lombard St, San Francisco, CA",
                      "client_id": "kf9d91uh82bclson",
                      "client_name": "Alice Smith",
                      "conversation_id": "rv28qk5ey5eretu9",
                      "created_at": "2018-06-14T09:31:21.000",
                      "currency": "USD",
                      "due_date": "2018-06-14",
                      "estimate_date": "2018-06-14",
                      "estimate_number": "1",
                      "id": "aaabbbccc112233",
                      "items": [
                        {
                          "amount": 10,
                          "description": "Service Description",
                          "discount": 2,
                          "quantity": 1,
                          "taxes": [
                            {
                              "name": "10 tax",
                              "rate": 10
                            }
                          ],
                          "title": "Item title"
                        }
                      ],
                      "note": "Estimate for your service",
                      "source_data": {
                        "campaign": null,
                        "channel": "",
                        "name": "client_portal",
                        "website_url": null
                      },
                      "staff_id": "mg9d34uh92bclwzg",
                      "status": "draft/issued/approved/rejected/invoiced",
                      "title": "Estimate title"
                    }
                  ]
                },
                "status": "OK"
              }
            }
          }
        },
        "security": [
          {
            "default": [
              "platform"
            ]
          }
        ],
        "summary": "Get Estimates List",
        "tags": [
          "Estimates"
        ],
        "x-amazon-apigateway-auth": {
          "type": "NONE"
        },
        "x-amazon-apigateway-integration": {
          "httpMethod": "GET",
          "responses": {
            "default": {
              "statusCode": "200"
            }
          },
          "type": "http_proxy",
          "uri": "https:///platform/v1/estimates"
        },
        "x-auth-type": "Application & Application User"
      }
    },
    "/payments": {
      "get": {
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "description": "Page offset",
            "in": "query",
            "name": "page",
            "required": false,
            "type": "string"
          },
          {
            "description": "Page size",
            "in": "query",
            "name": "per_page",
            "required": false,
            "type": "string"
          },
          {
            "description": "Available filters: state: filter[state][in]=paid,pending,failed,refunded,cancelled,archived,incompleted.\n                                                                                           created_at: filter[created_at][eq/lt/lte/gt/gte]=2023-01-01 or 2023-01-01 09:30:00.\n                                                                                           updated_at: filter[updated_at][eq/lt/lte/gt/gte]=2023-01-01 or 2023-01-01 09:30:00.\n                                                                                           client_id: filter[client_id][eq]=client_id.\n                                                                                           invoice_id: filter[invoice_id][eq]=invoice_id.",
            "in": "query",
            "name": "filter",
            "required": false,
            "type": "string"
          },
          {
            "description": "Sort by one of the following: created_at, updated_at.\n                                                                      Available operators: asc, desc.\n                                                                      Example: sort=created_at:asc,updated_at:desc",
            "in": "query",
            "name": "sort",
            "required": false,
            "type": "string"
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "201": {
            "description": "Payments Returned",
            "examples": {
              "application/json": {
                "data": {
                  "payments": [
                    {
                      "amount": 300,
                      "charged_at": "23/4/2019 09:00:00",
                      "client_id": "12344",
                      "conversation_id": "1234",
                      "currency": "USD",
                      "fees": [
                        {
                          "amount": 13,
                          "name": "Taylor Swift Fee"
                        }
                      ],
                      "id": "1234",
                      "note": "Payment Note",
                      "offline": true,
                      "other_payment_method": "bit",
                      "payment_method": "cash/check",
                      "payment_requests": [
                        {
                          "id": "1246"
                        }
                      ],
                      "reference": "123",
                      "state": "paid/refunded",
                      "tips": [
                        {
                          "amount": 100
                        }
                      ],
                      "title": "Payment Title"
                    }
                  ]
                },
                "status": "OK"
              }
            }
          }
        },
        "security": [
          {
            "default": [
              "platform"
            ]
          }
        ],
        "summary": "Get Payments List",
        "tags": [
          "Payments"
        ],
        "x-amazon-apigateway-auth": {
          "type": "NONE"
        },
        "x-amazon-apigateway-integration": {
          "httpMethod": "GET",
          "responses": {
            "default": {
              "statusCode": "200"
            }
          },
          "type": "http_proxy",
          "uri": "https:///platform/v1/payments"
        },
        "x-auth-type": "Application & Application User"
      },
      "post": {
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "amount": {
                  "description": "amount",
                  "type": "number"
                },
                "client_id": {
                  "description": "client ID",
                  "type": "string"
                },
                "currency": {
                  "description": "USD, ILS etc.",
                  "type": "string"
                },
                "fees": {
                  "description": "Array of fees (Max 1 fee)",
                  "items": {
                    "properties": {
                      "amount": {
                        "description": "Fee amount",
                        "type": "number"
                      },
                      "name": {
                        "description": "Fee name (Max 35 chars)",
                        "type": "string"
                      }
                    },
                    "required": [
                      "name",
                      "amount"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                },
                "mark_as_online": {
                  "description": "Enable online refund. Default is disabled",
                  "type": "boolean"
                },
                "other_payment_method": {
                  "description": "Max 24 chars",
                  "type": "string"
                },
                "paid_at": {
                  "description": "default is now",
                  "type": "string"
                },
                "pay_key": {
                  "description": "Max 64 chars",
                  "type": "string"
                },
                "payment_method": {
                  "description": "'PayPal', 'Other', 'Cash', 'Credit Card', 'Bank Transfer', 'Cheque'",
                  "type": "string"
                },
                "payment_subject_id": {
                  "description": "The ID of the entity for which the payment has been made",
                  "type": "string"
                },
                "payment_subject_type": {
                  "description": "The type of entity for which the payment has been made. Available types: 'Meeting', 'EventAttendance', 'Invoice', 'ClientBookingPackage', 'ProductOrder'.",
                  "type": "string"
                },
                "reference": {
                  "description": "Max 24 chars",
                  "type": "string"
                },
                "send_receipt": {
                  "description": "true, false. default true",
                  "type": "boolean"
                },
                "staff_id": {
                  "description": "Default is set to the staff that performed the API call. Business owner is allowed to send staff_id",
                  "type": "string"
                },
                "state": {
                  "description": "The current payment state. This field can be used only for creating a pending payment. Value can be only 'pending'",
                  "type": "string"
                },
                "tips": {
                  "description": "Array of tips (Max 1 tip)",
                  "items": {
                    "properties": {
                      "amount": {
                        "description": "Tip amount",
                        "type": "number"
                      }
                    },
                    "required": [
                      "amount"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                },
                "title": {
                  "description": "paid for service or product",
                  "type": "string"
                }
              },
              "required": [
                "client_id",
                "payment_method",
                "currency",
                "amount",
                "title"
              ],
              "type": "object"
            }
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "201": {
            "description": "Payment Created",
            "examples": {
              "application/json": {
                "data": {
                  "payment": {
                    "amount": 150,
                    "client_id": "aaabbbccc112233",
                    "conversation_id": "aaabbbccc112233",
                    "created_at": "2019-10-16T13:05:43Z",
                    "currency": "USD",
                    "fees": [
                      {
                        "amount": 13,
                        "name": "Taylor Swift Fee"
                      }
                    ],
                    "marked_as_online": false,
                    "other_payment_method": "bit",
                    "paid_at": "2019-10-15T13:05:43Z",
                    "paid_offline": true,
                    "pay_key": "123456",
                    "payment_action": "record_payment",
                    "payment_id": "aaabbbccc112233",
                    "payment_method": "credit_card",
                    "reference": "123",
                    "send_receipt": true,
                    "staff_id": "aaabbbccc112233",
                    "state": "paid",
                    "tips": [
                      {
                        "amount": 100
                      }
                    ],
                    "title": "Payment Title"
                  }
                },
                "status": "OK"
              }
            }
          }
        },
        "security": [
          {
            "default": [
              "platform"
            ]
          }
        ],
        "summary": "Create New Payment",
        "tags": [
          "Payments"
        ],
        "x-amazon-apigateway-auth": {
          "type": "NONE"
        },
        "x-amazon-apigateway-integration": {
          "httpMethod": "POST",
          "responses": {
            "default": {
              "statusCode": "200"
            }
          },
          "type": "http_proxy",
          "uri": "https:///platform/v1/payments"
        },
        "x-auth-type": "Application & Application User"
      }
    },
    "/payments/{payment_id}": {
      "get": {
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "description": "payment's id",
            "in": "path",
            "name": "payment_id",
            "required": true,
            "type": "string"
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "201": {
            "description": "Payment Returned",
            "examples": {
              "application/json": {
                "data": {
                  "payment": [
                    {
                      "amount": 300,
                      "charged_at": "23/4/2019 09:00:00",
                      "client_id": "12344",
                      "conversation_id": "1234",
                      "currency": "USD",
                      "fees": [
                        {
                          "amount": 13,
                          "name": "Taylor Swift Fee"
                        }
                      ],
                      "id": "1234",
                      "note": "Payment Note",
                      "offline": true,
                      "other_payment_method": "bit",
                      "payment_method": "cash/check",
                      "payment_requests": [
                        {
                          "id": "1246"
                        }
                      ],
                      "reference": "123",
                      "state": "paid/refunded",
                      "tips": [
                        {
                          "amount": 100
                        }
                      ],
                      "title": "Payment Title"
                    }
                  ]
                },
                "status": "OK"
              }
            }
          }
        },
        "security": [
          {
            "default": [
              "platform"
            ]
          }
        ],
        "summary": "Get Payment by ID",
        "tags": [
          "Payments"
        ],
        "x-amazon-apigateway-auth": {
          "type": "NONE"
        },
        "x-amazon-apigateway-integration": {
          "httpMethod": "GET",
          "requestParameters": {
            "integration.request.path.payment_id": "method.request.path.payment_id"
          },
          "responses": {
            "default": {
              "statusCode": "200"
            }
          },
          "type": "http_proxy",
          "uri": "https:///platform/v1/payments/{payment_id}"
        },
        "x-auth-type": "Application & Application User"
      }
    },
    "/payments/{payment_uid}/match": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "description": "relevant payment UID",
            "in": "path",
            "name": "payment_uid",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "matter_uid": {
                  "description": "The matter uid of the relevant payment",
                  "type": "string"
                },
                "payment_status_uid": {
                  "description": "The uid of the relevant payment request to match",
                  "type": "string"
                }
              },
              "required": [
                "matter_uid",
                "payment_status_uid"
              ],
              "type": "object"
            }
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "201": {
            "description": "Payment Matched",
            "examples": {
              "application/json": {
                "data": {
                  "payment": {
                    "amount": 1,
                    "client_id": "jfcomkyykiz0mqkw",
                    "conversation_id": "lzxxiv5euh8z18qw",
                    "created_at": "2022-01-19T12:26:15Z",
                    "currency": "ILS",
                    "marked_as_online": false,
                    "other_payment_method": "bit",
                    "paid_at": "2022-01-19T12:26:05Z",
                    "paid_offline": true,
                    "payment_action": "record_payment",
                    "payment_id": "2ulfclwzu8yksj9u",
                    "payment_method": "Cash",
                    "reference": "123",
                    "send_receipt": true,
                    "source_data": {
                      "campaign": "1",
                      "channel": "1",
                      "name": "initiated_by_staff",
                      "website_url": "1"
                    },
                    "state": "paid"
                  }
                },
                "status": "OK"
              }
            }
          }
        },
        "security": [
          {
            "default": [
              "platform"
            ]
          }
        ],
        "summary": "Match Payment",
        "tags": [
          "Payments"
        ],
        "x-amazon-apigateway-auth": {
          "type": "NONE"
        },
        "x-amazon-apigateway-integration": {
          "httpMethod": "POST",
          "responses": {
            "default": {
              "statusCode": "200"
            }
          },
          "type": "http_proxy",
          "uri": "https:///platform/v1/payments"
        },
        "x-auth-type": "Application & Application User"
      }
    }
  },
  "securityDefinitions": {
    "default": {
      "authorizationUrl": "https://ignore.myclients.io",
      "flow": "implicit",
      "scopes": {
        "platform": "All platform related operations",
        "platform_create": "platform create scope",
        "platform_delete": "platform delete scope",
        "platform_read": "platform read scope",
        "platform_update": "platform update scope"
      },
      "type": "oauth2",
      "x-scopes-bindings": {
        "platform": "",
        "platform_create": "",
        "platform_delete": "",
        "platform_read": "",
        "platform_update": ""
      }
    }
  },
  "swagger": "2.0",
  "x-throttling-tier": "8ReqPerSec"
}
