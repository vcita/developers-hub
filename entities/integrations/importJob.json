{
  "openapi": "3.0.0",
  "info": {
    "title": "Import Job API",
    "version": "1.0.0"
  },
  "paths": {},
  "components": {
    "schemas": {
      "ImportJob": {
        "type": "object",
        "properties": {
          "uid": {
            "type": "string",
            "description": "Unique identifier of the import job"
          },
          "provider_type": {
            "type": "string",
            "enum": [
              "excel",
              "import_job"
            ],
            "description": "The type of import provider"
          },
          "provider_data": {
            "description": "The data used by the provider to import the records",
            "oneOf": [
              {
                "$ref": "#/components/schemas/ExcelProviderData",
                "description": "Excel provider configuration"
              },
              {
                "$ref": "#/components/schemas/ExistingImportJob",
                "description": "Existing import job configuration"
              }
            ]
          },
          "job_type": {
            "type": "string",
            "enum": [
              "validate",
              "execute"
            ],
            "description": "The type of job operation. 'validate' will go over the lines and return errors, use /v3/integrations/import_job_items to get detailed errors about each line.\n'execute' will run the import job. use /v3/integrations/import_job to get the progress of the import task."
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "processing",
              "done",
              "error"
            ],
            "description": "Current status of the import job"
          },
          "error_message": {
            "type": "string",
            "description": "Error message if the job failed"
          },
          "progress": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "description": "Total number of records to be processed"
              },
              "done": {
                "type": "number",
                "description": "Number of records successfully processed"
              },
              "error": {
                "type": "number",
                "description": "Number of records that failed processing"
              },
              "pending": {
                "type": "number",
                "description": "Number of records pending processing"
              }
            },
            "required": [
              "total",
              "done",
              "error",
              "pending"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        },
        "required": [
          "uid",
          "provider_type",
          "provider_data",
          "job_type",
          "status",
          "progress",
          "created_at",
          "updated_at"
        ]
      },
      "ExcelProviderData": {
        "type": "object",
        "properties": {
          "entity_type": {
            "type": "string",
            "description": "Type of entity being imported"
          },
          "original_file_name": {
            "type": "string",
            "description": "Name of the uploaded file"
          },
          "fields": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of field names to be processed"
          },
          "context": {
            "type": "object",
            "additionalProperties": true,
            "description": "Additional context data for the import"
          }
        },
        "required": [
          "entity_type",
          "original_file_name"
        ]
      },
      "ExistingImportJob": {
        "type": "object",
        "properties": {
          "source_import_job_uid": {
            "type": "string",
            "description": "The UID of the import job that was used for validation"
          }
        },
        "required": [
          "source_import_job_uid"
        ]
      }
    }
  }
}
