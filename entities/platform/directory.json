{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Directory",
  "description": "Represents a Directory (Partner) account in the platform, including all technical and configuration metadata.",
  "type": "object",
  "properties": {
    "id": {
      "type": "integer",
      "description": "Internal database identifier for the directory."
    },
    "uid": {
      "type": "string",
      "description": "Unique public identifier used for API access and external references."
    },
    "name": {
      "type": "string",
      "description": "The display name of the directory account."
    },
    "partner_name": {
      "type": "string",
      "description": "Full official name of the partner organization."
    },
    "alias": {
      "type": "string",
      "description": "Short, URL-friendly alias or internal code for the directory."
    },
    "subdomain": {
      "type": "string",
      "description": "The vcita subdomain prefix assigned to the directory (e.g., 'acme')."
    },
    "is_whitelabel_subdomain": {
      "type": "boolean",
      "description": "Flag indicating if the custom subdomain should be used for white-labeling."
    },
    "host_mapping": {
      "type": "string",
      "description": "The custom domain or hostname mapped to this directory (e.g., 'portal.acme.com')."
    },
    "host_mapping_verified_at": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the custom host mapping was successfully verified."
    },
    "is_ssl_enabled": {
      "type": "boolean",
      "description": "Flag indicating if SSL is enabled for the custom domain."
    },
    "old_host_mapping": {
      "type": "string",
      "description": "Stores the previous host mapping value before a change occurred."
    },
    "frontage": {
      "type": "string",
      "description": "Identifier for the frontage (landing page) template or configuration used."
    },
    "is_white_label": {
      "type": "boolean",
      "description": "Flag indicating if basic white-labeling features are enabled."
    },
    "manual_type": {
      "type": "string",
      "enum": ["white_label", "solution_provider", "co_branded"],
      "description": "The classification of the partnership or directory type."
    },
    "whitelabel_created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when white-labeling was first enabled for this directory."
    },
    "current_subscription_created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the directory's currently active subscription was created."
    },
    "admin_id": {
      "type": "integer",
      "description": "The internal Business ID of the account that acts as the administrator for this directory."
    },
    "configuration_key": {
      "type": "string",
      "description": "Internal key used to apply specific platform logic or presets (e.g., 'star', 'duda', 'vcita')."
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of record creation."
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of the last record update."
    },
    "default_password": {
      "type": "string",
      "description": "The default password (usually encrypted) for new members created within this directory."
    },
    "branding_theme_id": {
      "type": "integer",
      "description": "ID of the branding theme (colors, logos) applied to this directory."
    },
    "management_theme_id": {
      "type": "integer",
      "description": "ID of the management interface theme applied to this directory."
    },
    "old_type": {
      "type": "string",
      "description": "Legacy storage for the directory type before migration."
    },
    "billing_type": {
      "type": "string",
      "enum": ["manual", "recurly"],
      "description": "Method used for processing payments for this directory account."
    },
    "is_managed": {
      "type": "boolean",
      "description": "Flag indicating if the directory is a managed partner account."
    },
    "is_deprecated": {
      "type": "boolean",
      "description": "Flag indicating if the directory account is no longer active or supported."
    },
    "members_count": {
      "type": "integer",
      "description": "Total number of business members currently associated with this directory."
    },
    "is_trial_allowed": {
      "type": "boolean",
      "description": "Flag indicating if the directory has permission to grant member trial periods (can_give_trial flag in the database)."
    },
    "is_slim_register_enabled": {
      "type": "boolean",
      "description": "Flag indicating if a simplified ('slim') registration flow is enabled (slim_register flag in the database)."
    },
    "is_social_links_on": {
      "type": "boolean",
      "description": "Flag indicating if social media links should be visible in the portal (social_links_on flag in the database)."
    },
    "locale": {
      "type": "string",
      "description": "Default language and region settings for the directory (e.g., 'en-US')."
    },
    "time_zone": {
      "type": "string",
      "description": "The default time zone assigned to the directory portal."
    },
    "paypal_email": {
      "type": "string",
      "format": "email",
      "description": "PayPal email address associated with the account for payments."
    },
    "rev_share": {
      "type": "integer",
      "description": "Primary percentage of revenue shared with the directory partner."
    },
    "rev_share_tier2": {
      "type": "integer",
      "description": "Secondary tier revenue share percentage."
    },
    "banners_visibility": {
      "type": "string",
      "description": "Configuration string for controlling the visibility of promotional banners."
    },
    "only_owner_login_redirect": {
      "type": "boolean",
      "description": "Flag to restrict portal login redirects exclusively to the account owner."
    },
    "paid_total": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]{2}$",
      "description": "Total revenue paid by the directory account, represented as a decimal string."
    },
    "custom_sms_sending_phone_number": {
      "type": "string",
      "description": "Specific phone number used for sending SMS notifications from this directory."
    },
    "features": {
      "type": "string",
      "description": "A list or encoded string of high-level features enabled for the directory."
    },
    "features_info": {
      "type": "object",
      "description": "Detailed metadata and JSON object regarding specific enabled feature modules."
    },
    "settings": {
      "type": "object",
      "description": "General configuration settings stored as a JSON object."
    },
    "welcome_engagement_params": {
      "type": "object",
      "description": "Parameters used to configure the initial 'welcome' flow for new members."
    },
    "invite_subject": {
      "type": "string",
      "description": "Default subject line for invitation emails sent from this directory."
    },
    "invite_body": {
      "type": "string",
      "description": "Default body content for invitation emails sent from this directory."
    },
    "is_unsubscribe_sms": {
      "type": "boolean",
      "description": "Flag indicating if the directory has opted out of SMS messages."
    },
    "is_disable_analytics": {
      "type": "boolean",
      "description": "Flag indicating if tracking and analytics should be suppressed for this account."
    },
    "content_business_id": {
      "type": "integer",
      "description": "The ID of the specialized Business entity used for content management."
    },
    "is_content_manager_enabled": {
      "type": "boolean",
      "description": "Flag indicating if the built-in content management system is enabled."
    },
    "is_user_identity_manager_enabled": {
      "type": "boolean",
      "description": "Flag indicating if the user identity management service is enabled."
    },
    "ultimate_monthly_subscription_id": {
      "type": "integer",
      "description": "Internal identifier for the 'Ultimate' monthly subscription plan."
    },
    "ultimate_annual_subscription_id": {
      "type": "integer",
      "description": "Internal identifier for the 'Ultimate' annual subscription plan."
    },
    "subscriptions_mismatch_at": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp indicating when a subscription data inconsistency was detected."
    },
    "white_label_subscription_id": {
      "type": "integer",
      "description": "Internal identifier for the white-label specific subscription plan."
    },
    "current_subscription_id": {
      "type": "integer",
      "description": "Reference to the currently active subscription record."
    },
    "pending_member_id": {
      "type": "integer",
      "description": "ID of a member account that is currently awaiting approval or activation."
    },
    "default_package_id": {
      "type": "integer",
      "description": "ID of the default service package assigned to new members."
    },
    "is_default_self_paid": {
      "type": "boolean",
      "description": "Flag indicating if members are set to pay for their own plans by default."
    },
    "redeem_state": {
      "type": "string",
      "description": "Current status of coupon or offer redemption for the directory."
    },
    "mobile_app_name": {
      "type": "string",
      "description": "Custom branded name for the directory's mobile application."
    },
    "mobile_app_ios": {
      "type": "string",
      "description": "Download URL for the iOS (Apple App Store) version of the mobile app."
    },
    "mobile_app_android": {
      "type": "string",
      "description": "Download URL for the Android (Google Play Store) version of the mobile app."
    },
    "email_template_owner_uid": {
      "type": "string",
      "description": "UID of the entity that owns the base email templates for this directory."
    },
    "urls": {
      "type": "object",
      "description": "Collection of localized and configured URLs related to the directory portal.",
      "properties": {
        "home_url": { "type": "string", "description": "Primary landing page URL." },
        "support_url": { "type": "string", "description": "Support contact URL or mailto link." },
        "faq_url": { "type": "string", "description": "Help center or FAQ page URL." },
        "cancel_page_url": { "type": "string", "description": "URL for subscription cancellation." },
        "upgrade_page_url": { "type": "string", "description": "URL for plan upgrades." },
        "signup_url": { "type": "string", "description": "URL for new member registration." },
        "login_url": { "type": "string", "description": "Direct portal login URL." },
        "sms_purchase_url": { "type": "string", "description": "URL for purchasing SMS credits." },
        "backoffice_url": { "type": "string", "description": "Admin back-office interface URL." }
      }
    }
  },
  "required": ["id", "uid", "name"],
  "example": {
    "id": 1024,
    "uid": "D-THRYV-2026-X1",
    "name": "Thryv Business Portal",
    "partner_name": "Thryv Inc.",
    "alias": "thryv_pro",
    "subdomain": "thryv-business",
    "is_whitelabel_subdomain": true,
    "host_mapping": "portal.thryv.com",
    "host_mapping_verified_at": "2026-01-01T12:00:00Z",
    "is_ssl_enabled": true,
    "old_host_mapping": "old.portal.thryv.com",
    "frontage": "thryv_v3",
    "is_white_label": true,
    "manual_type": "solution_provider",
    "whitelabel_created_at": "2026-01-01T08:00:00Z",
    "current_subscription_created_at": "2026-01-01T08:00:00Z",
    "admin_id": 5500,
    "configuration_key": "star",
    "created_at": "2026-01-01T08:00:00Z",
    "updated_at": "2026-01-18T10:00:00Z",
    "default_password": "encrypted_password_example",
    "branding_theme_id": 204,
    "management_theme_id": 205,
    "old_type": "reseller",
    "billing_type": "recurly",
    "is_managed": true,
    "is_deprecated": false,
    "members_count": 12500,
    "is_trial_allowed": true,
    "is_slim_register_enabled": true,
    "is_social_links_on": true,
    "locale": "en-US",
    "time_zone": "America/Chicago",
    "paypal_email": "finance@thryv.com",
    "rev_share": 25,
    "rev_share_tier2": 10,
    "banners_visibility": "hide",
    "only_owner_login_redirect": true,
    "paid_total": "125000.50",
    "custom_sms_sending_phone_number": "+18885550199",
    "features": "unlimited",
    "features_info": { "active_modules": ["crm", "billing", "marketing"] },
    "settings": { "allow_custom_branding": true, "support_tier": "gold" },
    "welcome_engagement_params": { "template_id": "welcome_01" },
    "invite_subject": "Activate your business portal",
    "invite_body": "Welcome to the Thryv family! Your portal is ready.",
    "is_unsubscribe_sms": false,
    "is_disable_analytics": false,
    "content_business_id": 6000,
    "is_content_manager_enabled": true,
    "is_user_identity_manager_enabled": true,
    "ultimate_monthly_subscription_id": 889,
    "ultimate_annual_subscription_id": null,
    "subscriptions_mismatch_at": nil,
    "white_label_subscription_id": 990,
    "current_subscription_id": 990,
    "pending_member_id": nil,
    "default_package_id": 5,
    "is_default_self_paid": true,
    "redeem_state": "active",
    "mobile_app_name": "Thryv Mobile",
    "mobile_app_ios": "https://apps.apple.com/app/thryv",
    "mobile_app_android": "https://play.google.com/store/apps/thryv",
    "email_template_owner_uid": "U-THRYV-ADMIN",
    "urls": {
      "home_url": "https://www.thryv.com",
      "support_url": "https://thryv.com/support",
      "faq_url": "https://thryv.com/faq",
      "login_url": "https://portal.thryv.com/login",
      "signup_url": "https://thryv.com/get-started",
      "upgrade_page_url": "https://portal.thryv.com/upgrade",
      "cancel_page_url": "https://portal.thryv.com/cancel",
      "sms_purchase_url": "https://portal.thryv.com/sms",
      "backoffice_url": "https://admin.thryv.com"
    }
  }
}
