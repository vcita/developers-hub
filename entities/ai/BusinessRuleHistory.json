{
  "type": "object",
  "description": "Represents a historical record of a change made to a business rule. Each time a rule is created, updated, or deleted, a history entry is recorded capturing the state of the rule at that point in time, who made the change, and what type of change it was. This provides a full audit trail for business rule management.",
  "properties": {
    "uid": {
      "type": "string",
      "readOnly": true,
      "description": "The unique identifier (UID) of the history record (e.g., \"hist-a1b2c3d4-e5f6-7890-abcd-ef1234567890\"). Assigned automatically by the system."
    },
    "rule_uid": {
      "type": "string",
      "readOnly": true,
      "description": "The UID of the business rule this history entry belongs to (e.g., \"br-a1b2c3d4-5678-90ef-ghij-klmnopqrstuv\"). Links back to the original business rule."
    },
    "business_uid": {
      "type": "string",
      "readOnly": true,
      "description": "The unique identifier (UID) of the business that owns the rule (e.g., \"biz-1234abcd-5678-90ef-ghij-klmnopqrstuv\")."
    },
    "content": {
      "type": "string",
      "description": "The content of the rule at the time of the change (e.g., \"Always use a friendly and professional tone when communicating with clients\"). This captures the exact state of the rule content when the history entry was recorded."
    },
    "source": {
      "type": "string",
      "description": "Indicates whether the change was made by the AI system or by a user (staff member).\n\n* `system` - The change was made automatically by the AI system.\n* `user` - The change was made manually by a staff member.",
      "enum": [
        "system",
        "user"
      ]
    },
    "action": {
      "type": "string",
      "description": "The type of change that was made to the business rule.\n\n* `created` - The rule was newly created.\n* `updated` - The rule's content, category, status, or other fields were modified.\n* `deleted` - The rule was removed.",
      "enum": [
        "created",
        "updated",
        "deleted"
      ]
    },
    "changed_by_staff_uid": {
      "type": "string",
      "description": "The UID of the staff member who made the change (e.g., \"stf-9876wxyz-5432-10ab-cdef-ghijklmnopqr\"). Will be null if the change was made by the system automatically.",
      "nullable": true
    },
    "changed_at": {
      "type": "string",
      "format": "date-time",
      "description": "The date and time when the change was made, in ISO 8601 format (e.g., \"2024-12-16T14:30:00.000Z\")."
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "readOnly": true,
      "description": "The date and time when the history record was created, in ISO 8601 format (e.g., \"2024-12-16T14:30:00.000Z\")."
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "readOnly": true,
      "description": "The date and time when the history record was last updated, in ISO 8601 format (e.g., \"2024-12-16T14:30:00.000Z\")."
    },
    "category_code": {
      "type": "string",
      "description": "The category of the business rule at the time of the change.\n\n* `tone_of_voice` - Rules about communication style, language, and tone the AI should adopt.\n* `policies_and_info` - Rules about business operations, pricing, and scheduling policies.\n* `things_to_avoid` - Rules about topics, phrases, or actions the AI should not mention or perform.\n* `faq` - Frequently asked questions and their answers.",
      "enum": [
        "tone_of_voice",
        "policies_and_info",
        "things_to_avoid",
        "faq"
      ]
    }
  },
  "required": [
    "uid",
    "rule_uid",
    "business_uid",
    "category_code",
    "content",
    "source",
    "action",
    "changed_at",
    "created_at",
    "updated_at"
  ],
  "example": {
    "uid": "hist-a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "rule_uid": "br-a1b2c3d4-5678-90ef-ghij-klmnopqrstuv",
    "business_uid": "biz-1234abcd-5678-90ef-ghij-klmnopqrstuv",
    "content": "Always use a friendly and professional tone when communicating with clients",
    "source": "user",
    "action": "updated",
    "changed_by_staff_uid": "stf-9876wxyz-5432-10ab-cdef-ghijklmnopqr",
    "changed_at": "2024-12-16T14:30:00.000Z",
    "created_at": "2024-12-16T14:30:00.000Z",
    "updated_at": "2024-12-16T14:30:00.000Z",
    "category_code": "tone_of_voice"
  }
}