{
  "type": "object",
  "description": "Represents an AI-generated suggestion to create, update, or delete a business rule. The AI system analyzes business conversations and generates suggestions for new rules or improvements to existing ones. Each suggestion requires staff review (approve or reject) before any changes are applied to the actual business rules.",
  "properties": {
    "uid": {
      "type": "string",
      "readOnly": true,
      "description": "The unique identifier (UID) of the suggestion (e.g., \"sug-f1e2d3c4-b5a6-9788-7654-321fedcba098\"). Assigned automatically by the system upon creation."
    },
    "business_uid": {
      "type": "string",
      "readOnly": true,
      "description": "The unique identifier (UID) of the business this suggestion belongs to (e.g., \"biz-1234abcd-5678-90ef-ghij-klmnopqrstuv\"). Automatically set based on the business context."
    },
    "rule_uid": {
      "type": "string",
      "readOnly": true,
      "description": "The UID of the existing rule this suggestion relates to (e.g., \"br-a1b2c3d4-5678-90ef-ghij-klmnopqrstuv\"). Will be null for `create` action suggestions since no existing rule is involved. Present for `update` and `delete` action suggestions.",
      "nullable": true
    },
    "action": {
      "type": "string",
      "description": "The type of change being suggested for the business rule.\n\n* `create` - Suggests creating a brand new business rule. The `rule_uid` will be null.\n* `update` - Suggests modifying an existing business rule. The `rule_uid` will reference the target rule, and `original_content` will contain its current content.\n* `delete` - Suggests removing an existing business rule. The `rule_uid` will reference the target rule.",
      "enum": [
        "create",
        "update",
        "delete"
      ]
    },
    "category": {
      "type": "string",
      "description": "The category of the business rule being suggested.\n\n* `tone_of_voice` - Rules about communication style, language, and tone the AI should adopt.\n* `business_policies` - Rules about business operations, pricing, and scheduling policies.\n* `things_to_avoid` - Rules about topics, phrases, or actions the AI should not mention or perform.\n* `faq` - Frequently asked questions and their answers.",
      "enum": [
        "tone_of_voice",
        "business_policies",
        "things_to_avoid",
        "faq"
      ]
    },
    "suggested_content": {
      "type": "string",
      "description": "The suggested new content for the rule (e.g., \"Our business hours are Monday to Friday, 9 AM to 5 PM\"). For `create` suggestions, this is the full content. For `update` suggestions, this is the proposed replacement content."
    },
    "original_content": {
      "type": "string",
      "description": "The original content of the rule before the suggested change (e.g., \"We are open weekdays\"). Only present for `update` and `delete` suggestions. Will be null for `create` suggestions.",
      "nullable": true
    },
    "status": {
      "type": "string",
      "description": "The current review status of the suggestion.\n\n* `pending` - The suggestion is awaiting review by a staff member.\n* `approved` - The suggestion has been approved and the corresponding change has been applied to the business rules.\n* `rejected` - The suggestion has been rejected and no changes were applied.",
      "enum": [
        "pending",
        "approved",
        "rejected"
      ]
    },
    "confidence": {
      "type": "number",
      "description": "AI confidence score for the suggestion, ranging from 0.00 to 1.00 (e.g., 0.87). Higher values indicate greater confidence in the suggestion. Will be null if confidence data is unavailable.",
      "nullable": true
    },
    "reasoning": {
      "type": "string",
      "description": "AI-generated reasoning explaining why this suggestion was made (e.g., \"Detected consistent business hours mentioned across multiple client conversations\"). Provides context for the reviewer. Will be null if reasoning data is unavailable.",
      "nullable": true
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata associated with the suggestion. May contain supplementary information such as source conversation counts or structured FAQ data (question/answer pairs).",
      "nullable": true
    },
    "reviewed_by_staff_uid": {
      "type": "string",
      "readOnly": true,
      "description": "The UID of the staff member who reviewed (approved or rejected) this suggestion (e.g., \"stf-9876wxyz-5432-10ab-cdef-ghijklmnopqr\"). Will be null while the suggestion is still pending.",
      "nullable": true
    },
    "reviewed_at": {
      "type": "string",
      "format": "date-time",
      "readOnly": true,
      "description": "The date and time when the suggestion was reviewed, in ISO 8601 format (e.g., \"2024-12-16T12:00:00.000Z\"). Will be null while the suggestion is still pending.",
      "nullable": true
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "readOnly": true,
      "description": "The date and time when the suggestion was created, in ISO 8601 format (e.g., \"2024-12-16T08:00:00.000Z\")."
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "readOnly": true,
      "description": "The date and time when the suggestion was last updated, in ISO 8601 format (e.g., \"2024-12-16T12:00:00.000Z\")."
    }
  },
  "required": [
    "uid",
    "business_uid",
    "action",
    "category",
    "suggested_content",
    "status",
    "created_at",
    "updated_at"
  ],
  "example": {
    "uid": "sug-f1e2d3c4-b5a6-9788-7654-321fedcba098",
    "business_uid": "biz-1234abcd-5678-90ef-ghij-klmnopqrstuv",
    "rule_uid": null,
    "action": "create",
    "category": "faq",
    "suggested_content": "Our business hours are Monday to Friday, 9 AM to 5 PM",
    "original_content": null,
    "status": "pending",
    "confidence": 0.87,
    "reasoning": "Detected consistent business hours mentioned across multiple client conversations",
    "metadata": {
      "source_conversations": 12
    },
    "reviewed_by_staff_uid": null,
    "reviewed_at": null,
    "created_at": "2024-12-16T08:00:00.000Z",
    "updated_at": "2024-12-16T08:00:00.000Z"
  }
}
