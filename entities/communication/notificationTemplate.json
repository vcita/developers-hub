{
  "title": "NotificationTemplate",
  "description": "Metadata definition for notification templates and delivery settings.",
  "type": "object",
  "properties": {
    "uid": {
      "type": "string",
      "description": "Unique identifier for the entity instance."
    },
    "code_name": {
      "type": "string",
      "description": "Unique identifier name for the notification"
    },
    "title": {
      "description": "The display name of the notification template that appears in the staff portal notification settings. This is what users see when browsing available notification options (e.g., \"Payment Received Notification\"). Should contain at least one English locale entry when creating a template.",
      "$ref": "#/definitions/localizedTextList"
    },
    "description": {
      "description": "A brief explanation that appears in the staff portal notification settings to help them understand what this notification is for and when it will be triggered. Should contain at least one English locale entry when creating a template.",
      "$ref": "#/definitions/localizedTextList"
    },
    "category": {
      "type": "string",
      "description": "The functional category this notification belongs to (e.g., \"payments\", \"booking\", \"documents\").",
      "enum": [
        "payments",
        "clients",
        "calendar",
        "booking",
        "marketing",
        "teamchat",
        "scheduling",
        "advertising",
        "group_events",
        "documents",
        "messages",
        "reviews",
        "social",
        "account"
      ]
    },
    "configurable_by_staff": {
      "type": "boolean",
      "description": "Boolean flag that determines whether staff members can customize or modify this notification template through the staff portal."
    },
    "delivery_channel": {
      "type": "array",
      "description": "List of delivery channels for the notification.",
      "items": {
        "type": "string",
        "enum": ["push", "pane", "email", "sms"]
      },
      "minItems": 1
    },
    "trigger_type": {
      "type": "string",
      "description": "Type of trigger for the notification.",
      "enum": ["system", "client"]
    },
    "content": {
      "type": "object",
      "description": "Notification content for 'email', 'staff_portal', and/or 'sms'. Not all content sections are required - only the channels that are relevant to the notification need to be populated.",
      "properties": {
        "staff_portal": {
          "type": "object",
          "description": "Staff portal notification content. This section is optional and may be omitted or contain empty arrays for templates not intended for staff portal delivery.",
          "properties": {
            "title": {
              "description": "Title for staff portal notification. May be an empty array if not configured.",
              "$ref": "#/definitions/localizedTextList"
            },
            "message_body": {
              "description": "Message body for staff portal notification. May be an empty array if not configured.",
              "$ref": "#/definitions/localizedTextList"
            },
            "deep_link": {
              "type": "string",
              "description": "Optional deep link URL for notification action."
            }
          }
        },
        "email": {
          "type": "object",
          "description": "Email notification content. This section is optional and may contain empty arrays for templates not intended for email delivery.",
          "properties": {
            "subject": {
              "description": "Email subject line. May be an empty array if not configured.",
              "$ref": "#/definitions/localizedTextList"
            },
            "top_image": {
              "type": "object",
              "description": "Image at the top of the email.",
              "properties": {
                "url": { "type": "string", "description": "Image URL." },
                "width": { "type": "integer", "description": "Image width in pixels." },
                "alt": { "description": "Alternative text for the image.", "$ref": "#/definitions/localizedTextList" }
              }
            },
            "main_title": {
              "description": "Header or introduction text for the email. May be an empty array if not configured.",
              "$ref": "#/definitions/localizedTextList"
            },
            "main_text": {
              "description": "Main content of the email. May be an empty array if not configured.",
              "$ref": "#/definitions/localizedTextList"
            },
            "middle_image": {
              "type": "object",
              "description": "Image in the middle of the email.",
              "properties": {
                "url": { "type": "string", "description": "Image URL." },
                "width": { "type": "integer", "description": "Image width in pixels." },
                "alt": { "description": "Alternative text for the image.", "$ref": "#/definitions/localizedTextList" }
              }
            },
            "middle_text": {
              "description": "Middle content of the email.",
              "$ref": "#/definitions/localizedTextList"
            },
            "footer_text": {
              "description": "Footer or closing text for the email.",
              "$ref": "#/definitions/localizedTextList"
            },
            "primary_cta_button": {
              "type": "object",
              "description": "Call-to-action button details.",
              "properties": {
                "text": { "description": "Button text.", "$ref": "#/definitions/localizedTextList" },
                "url": { "type": "string", "description": "Button URL." },
                "alt": { "description": "Alternative text for the button.", "$ref": "#/definitions/localizedTextList" }
              }
            },
            "secondary_cta_button": {
              "type": "object",
              "description": "Secondary call-to-action button details.",
              "properties": {
                "text": { "description": "Button text.", "$ref": "#/definitions/localizedTextList" },
                "url": { "type": "string", "description": "Button URL." },
                "alt": { "description": "Alternative text for the button.", "$ref": "#/definitions/localizedTextList" }
              }
            }
          }
        },
        "sms": {
          "type": "object",
          "description": "SMS notification content. This section is optional and may contain empty arrays for templates not intended for SMS delivery.",
          "properties": {
            "message_body": {
              "description": "Message body for SMS notification. May be an empty array if not configured.",
              "$ref": "#/definitions/localizedTextList"
            },
            "deep_link": {
              "type": "string",
              "description": "Optional deep link URL for SMS notification action."
            }
          }
        }
      }
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO8601 timestamp of when the entity was created."
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO8601 timestamp of the last update to the entity."
    }
  },
  "required": [
    "uid",
    "code_name",
    "title",
    "description",
    "category",
    "configurable_by_staff",
    "delivery_channel",
    "trigger_type",
    "content",
    "created_at",
    "updated_at"
  ],
  "definitions": {
    "localizedTextList": {
      "type": "array",
      "description": "List of localized strings. Each item is a locale-value pair: locale is a locale (from enum), value is a string. Each language can appear only once.",
      "uniqueItems": true,
      "items": {
        "type": "object",
        "properties": {
          "locale": {
            "type": "string",
            "enum": [
              "en", "fr", "de", "it", "pl", "pt", "es", "nl", "he", "sl", "en_gb"
            ]
          },
          "value": { "type": "string" }
        },
        "required": ["locale", "value"]
      }
    }
  },
  "example": {
    "uid": "notif-001",
    "code_name": "welcome_new_user",
    "title": [
      { "locale": "en", "value": "Welcome Notification" },
      { "locale": "fr", "value": "Notification de bienvenue" },
      { "locale": "de", "value": "Willkommensbenachrichtigung" }
    ],
    "description": [
      { "locale": "en", "value": "Sent to new users upon registration." },
      { "locale": "fr", "value": "Envoyé aux nouveaux utilisateurs lors de l'inscription." },
      { "locale": "es", "value": "Enviado a los nuevos usuarios al registrarse." }
    ],
    "category": "account",
    "configurable_by_staff": true,
    "delivery_channel": ["push", "email"],
    "trigger_type": "system",
    "content": {
      "staff_portal": {
        "title": [
          { "locale": "en", "value": "Welcome!" },
          { "locale": "fr", "value": "Bienvenue!" },
          { "locale": "es", "value": "¡Bienvenido!" }
        ],
        "message_body": [
          { "locale": "en", "value": "Thanks for joining us!" },
          { "locale": "fr", "value": "Merci de nous avoir rejoints!" }
        ],
        "deep_link": "https://example.com/welcome"
      },
      "email": {
        "subject": [
          { "locale": "en", "value": "Welcome to Our Service" },
          { "locale": "fr", "value": "Bienvenue à notre service" },
          { "locale": "de", "value": "Willkommen bei unserem Service" }
        ],
        "top_image": {
          "url": "https://example.com/banner.png",
          "width": 600,
          "alt": [ { "locale": "en", "value": "Welcome banner" }, { "locale": "fr", "value": "Bannière de bienvenue" } ]
        },
        "main_title": [
          { "locale": "en", "value": "Hello and Welcome!" },
          { "locale": "fr", "value": "Bonjour et bienvenue!" }
        ],
        "main_text": [
          { "locale": "en", "value": "We're excited to have you on board." },
          { "locale": "es", "value": "Estamos emocionados de tenerte con nosotros." }
        ],
        "middle_image": {
          "url": "https://example.com/mid.png",
          "width": 400,
          "alt": [ { "locale": "en", "value": "Mid section image" }, { "locale": "es", "value": "Imagen de la sección media" } ]
        },
        "middle_text": [
          { "locale": "en", "value": "Here are some tips to get started." },
          { "locale": "fr", "value": "Voici quelques conseils pour commencer." }
        ],
        "footer_text": [
          { "locale": "en", "value": "Best regards, The Team" },
          { "locale": "de", "value": "Mit freundlichen Grüßen, Das Team" }
        ],
        "primary_cta_button": {
          "text": [ { "locale": "en", "value": "Get Started" }, { "locale": "fr", "value": "Commencer" } ],
          "url": "https://example.com/start",
          "alt": [ { "locale": "en", "value": "Start now" }, { "locale": "fr", "value": "Commencez maintenant" } ]
        },
        "secondary_cta_button": {
          "text": [ { "locale": "en", "value": "Contact Support" }, { "locale": "es", "value": "Contactar Soporte" } ],
          "url": "https://example.com/support",
          "alt": [ { "locale": "en", "value": "Support" }, { "locale": "es", "value": "Soporte" } ]
        }
      },
      "sms": {
        "message_body": [
          { "locale": "en", "value": "Welcome! Thanks for joining us. Get started:" },
          { "locale": "fr", "value": "Bienvenue! Merci de nous avoir rejoints. Commencez:" },
          { "locale": "es", "value": "¡Bienvenido! Gracias por unirte. Comienza:" }
        ],
        "deep_link": "https://example.com/welcome"
      }
    },
    "created_at": "2024-06-01T12:00:00Z",
    "updated_at": "2024-06-01T12:00:00Z"
  }
}